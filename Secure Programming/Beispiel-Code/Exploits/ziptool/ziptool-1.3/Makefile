# ziptool v1.2 (c) 1997 Mirko Kraft (Mirko.Kraft@ixos.de)
#

# Compiler options.
#
CFLAGS = -ggdb -DEXPLOIT #-DEXPDEBUG

# Path to linux kernel sources.
#
LINUX_SRC_DIR = /usr/src/linux

# Installation directories
#
INSTALL_BIN_DIR = /usr/bin
INSTALL_MAN_DIR = /usr/share/man
DESTDIR=
all: ziptool

clean:
	rm -f jaztool ziptool core *.o

install: all
	chown root.root ziptool
	chmod 4755 ziptool
	mkdir -p ${DESTDIR}/$(INSTALL_BIN_DIR)
	cp ziptool ${DESTDIR}/$(INSTALL_BIN_DIR)
	 mkdir -p  ${DESTDIR}/$(INSTALL_MAN_DIR)/man1
	cp ziptool.1.gz ${DESTDIR}/$(INSTALL_MAN_DIR)/man1/
	cd ${DESTDIR}/$(INSTALL_BIN_DIR); ln -sf ziptool jaztool
	cd ${DESTDIR}/$(INSTALL_MAN_DIR)/man1; ln -sf ziptool.1.gz jaztool.1.gz

ziptool: ziptool.c
	gcc $(CFLAGS) -I$(LINUX_SRC_DIR)/include -o ziptool ziptool.c

jaztool: ziptool.c
	gcc $(CFLAGS) -I$(LINUX_SRC_DIR)/include -o jaztool ziptool.c
