#include <stdarg.h>


blaat(char *fmt, ...)
{
  va_list va;
  int i;
  char *addr;
  char *prot = (char *) 0x987654321;

  va_start(va, fmt);

  printf("---| begin |---\n");
  for(i = 0; i < 15; i++)
  {
    addr = va_arg(va, char *);
    printf("%p = %s\n", addr);
  }
  printf("---|  end  |---\n");

  va_end(va);
}

int main(int argc, char **argv)
{
  char bad[8];
  char buf[8];
  char *prot = (char *) 0x12345678;

  (void *) strncpy(bad, "beebad", 8);
  (void *) strncpy(buf, argv[1], 8);

  blaat(argv[1]);
  printf(argv[1]);
  putchar('\n');
  printf("argv[1] = %p\n", argv+1);
  printf("buf     = %p\n", buf);
  printf("bad     = %p\n", bad);

  exit(0);
}
